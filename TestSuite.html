<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8"/>
    <title>MazeWalker Test Suite</title>
	<script src="mazeGen.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

	
    <style>
        html, body {
            overflow: hidden;
            width   : 100%;
            height  : 100%;
            margin  : 0;
            padding : 0;
        }

        #renderCanvas {
            width   : 100%;
            height  : 100%;
            touch-action: none;
        }
    </style>

	<script src="babylon.js"></script>
	<script src="hand.js"></script>
    	<script src="cannon.js"></script>
	<script>
		var mazeGen = new mazeGenerator();
		var passTest = true;
		var sampleMaze = [['W', 'W', 'W', 'W', 'W', 'W', 'W'],
				    ['W', 'W', 'W', 'W', 'W', 'W', 'W'], 
				    ['W', 'S', 'V', 'V', 'V', 'W', 'W'], 
				    ['W', 'W', 'V', 'W', 'V', 'W', 'W'], 
				    ['W', 'W', 'V', 'W', 'V', 'E', 'W'], 
				    ['W', 'W', 'W', 'W', 'W', 'W', 'W'], 
				    ['W', 'W', 'W', 'W', 'W', 'W', 'W']];
		testSolver();
		testGenerator();
		testConverter();
		testSize();
		/*--------------------------------TEST SOLVER----------------------------*/
		function testSolver(){
			console.log("-----------------------------TEST SOLVER--------------------");
			var mazeUnsolvable = [['W', 'W', 'W', 'W', 'W', 'W', 'W'],
				    ['W', 'W', 'W', 'W', 'W', 'W', 'W'], 
				    ['W', 'S', 'V', 'V', 'V', 'W', 'W'], 
				    ['W', 'W', 'V', 'W', 'V', 'W', 'W'], 
				    ['W', 'W', 'V', 'W', 'V', 'W', 'W'], 
				    ['W', 'W', 'W', 'W', 'W', 'W', 'W'], 
				    ['W', 'W', 'W', 'W', 'W', 'W', 'W']];

			/*------Test Solve------*/
			var solution = [[2,1],[2,2],[2,3],[2,4],[3,4],[4,4],[4,5]];
			var mazeGenSolution = mazeGen.mazeSolver(sampleMaze);
			if(mazeGenSolution.length == solution.length)
			{
				for(var i = 0; i < mazeGenSolution.length; i++)
				{
					for(var j = 0; j < 2; j++)
					{
						if(mazeGenSolution[i][j] != solution[i][j])
						{
							passTest = false;
						}
					}
				}
			}else{passTest = false;}
			console.log("Test Solved Maze Passed: " + passTest);

			/*------Test Unsolvable------*/
			var mazeGenSolution = mazeGen.mazeSolver(mazeUnsolvable);
			if(mazeGenSolution.length == 0){
				console.log("Test Unsolved Maze Passed: true");
			}else{console.log("Test Unsolved Maze Passed: false");}
			passTest = true;
		}

		/*--------------------------------TEST GENERATOR---------------------------*/
		/*We know that solver is functional now, so we can use it to verify correctness of generated mazes*/
		function testGenerator(){
			console.log("-----------------------------TEST GENERATOR-----------------");

			var solution = [];
			for(var i = 0; i < 100; i++)
			{
				solution = mazeGen.mazeSolver(mazeGen.generateMaze(13));
				if(solution.length != 0){
					console.log("Maze Generation Successful");
				}else{
					console.log("Maze Generation Unsuccessful");
				}
			}
		}

		/*-------------------------------TEST CONVERTER----------------------------*/
		/*Tests conversion of 2D maze to 1D maze*/
		function testConverter(){
			console.log("-----------------------------TEST CONVERTER-----------------");
			var convertedMaze = mazeGen.twoToOne(sampleMaze);
			for(var i = 0; i < sampleMaze.length; i++)
			{
				for(var j = 0; j < sampleMaze.length; j++)
				{
					if(convertedMaze[i*7 + j] != sampleMaze[i][j])
					{
						passTest = false;
					}
				}
			}
			console.log("Conversion of sample maze successful: " + passTest);
			passTest = true;
		}

		/*-------------------------------TEST SIZE---------------------------------*/
		/*Test getMazeSize in generator using sample maze*/
		function testSize(){
			console.log("-----------------------------TEST SIZE OF MAZE--------------");
			if(mazeGen.getMazeSize(mazeGen.twoToOne(sampleMaze)) == 7)
			{
				console.log("Test sample maze size: Successful");
			}else{console.log("Test sample maze size: Unsuccessful");}
			if(mazeGen.getMazeSize([]) == 0)
			{
				console.log("Test size 0 maze: Successful");
			}else{console.log("Test size 0 maze: Unsuccessful");}
		}


		

	</script>
</head>
<body>
	<h1>MazeWalker Test Suite</h1>
	<br/>
	<p><a href="index.html">Return to the Start Menu</a></p>
</body>
</html>